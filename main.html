<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <title>后台导航面板</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <style>
    body {
      padding: 40px;
      font-family: "Segoe UI", sans-serif;
      background: #fff8e7;
    }
    .nav-card {
      padding: 25px;
      border-radius: 12px;
      background: white;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
      margin-bottom: 20px;
      transition: transform 0.2s;
    }
    .nav-card:hover {
      transform: scale(1.02);
    }
    h2 {
      margin-bottom: 30px;
      color: #b80000;
    }
    .username {
      text-align: right;
      margin-bottom: 20px;
      font-weight: bold;
      color: #555;
    }
    .restricted {
      display: none;  /* 确保默认隐藏 */
    }
  </style>
</head>
<body>
  <div class="container">
    <div class="username">👤 当前用户：<span id="whoLogin">未知</span></div>

    <h2 class="text-center">🔧 后台导航面板</h2>

    <div class="nav-card">
      <h5>🪔 超度管理后台</h5>
      <a href="https://leizs2025.github.io/houtai/chaodu/index1.html" target="_blank" class="btn btn-success">查看预览</a>
    </div>

    <div class="nav-card">
      <h5>🙏 祈福管理后台</h5>
      <a href="https://leizs2025.github.io/houtai/qifu/index.html" target="_blank" class="btn btn-primary">进入系统</a>
    </div>

    <div class="nav-card">
      <h5>💡 太岁光明灯后台</h5>
      <a href="https://leizs2025.github.io/1/crud-admin/index.html" target="_blank" class="btn btn-warning">进入系统</a>
    </div>

     <div class="nav-card">
      <h5>💡 太岁光明灯后台 (新年专用)</h5>
      <a href="https://leizs2025.github.io/1/crud-admin/index1.html" target="_blank" class="btn btn-warning">进入系统</a>
    </div>

    <div class="nav-card">
      <h5>👁️ 实时预览（祈福 + 超度）</h5>
      <a href="https://leizs2025.github.io/houtai/qifu/display1.html" target="_blank" class="btn btn-success">查看预览</a>
    </div>

    <div class="nav-card">
      <h5>👁️ 实时预览（太岁光明灯）</h5>
      <a href="https://leizs2025.github.io/1/crud-admin/display.html" target="_blank" class="btn btn-info">查看预览</a>
    </div>

    <div class="nav-card restricted">
      <h5>👁️ 日结报表总览</h5>
      <a href="report.html" target="_blank" class="btn btn-info">查看预览</a>
    </div>

    <div class="text-center mt-4">
      <button onclick="logout()" class="btn btn-outline-secondary">🚪 登出返回登录</button>
    </div>
  </div>

  <script>
    // 获取管理员名称和角色
    const admin = localStorage.getItem("admin");
    const role = localStorage.getItem("role");

    // 确保用户已登录
    if (!admin || !role) {
      alert("请先登录！");
      location.href = "https://leizs2025.github.io/houtai/login.html";
    } else {
      // 设置显示的用户名
      document.getElementById("whoLogin").textContent = admin;
      
      // 只允许 "admin" 和 "manager" 看到 restricted 内容
      if (role === "admin" || role === "manager") {
        // 确保在 DOM 加载完成后显示
        window.addEventListener("DOMContentLoaded", () => {
          const restrictedElements = document.querySelectorAll(".restricted");
          restrictedElements.forEach(element => element.style.display = "block");
        });
      }
    }

    function logout() {
      localStorage.removeItem("admin");
      localStorage.removeItem("role");
      location.href = "https://leizs2025.github.io/houtai/login.html";
    }
  </script>
</body>
</html>
